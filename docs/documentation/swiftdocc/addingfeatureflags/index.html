<!doctype html><html lang="en-US" class="no-js"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><link rel="icon" href="/swift-docc/favicon.ico"><link rel="mask-icon" href="/swift-docc/favicon.svg" color="#333333"><title>Adding Feature Flags</title><script>var baseUrl = "/swift-docc/"</script><script defer="defer" src="/swift-docc/js/chunk-vendors.0b7dc663.js"></script><script defer="defer" src="/swift-docc/js/index.54db7914.js"></script><link href="/swift-docc/css/index.19043b1e.css" rel="stylesheet"><meta content="Develop experimental features by adding feature flags." name="description"/></head><body data-color-scheme="auto"><noscript><article><section><ul><li><a href="../index.html">SwiftDocC</a></li><li>Adding Feature Flags</li></ul><p id="eyebrow">Article</p><h1>Adding Feature Flags</h1><p id="abstract">Develop experimental features by adding feature flags.</p></section><h2>Overview</h2><p>Make new features in Swift-DocC optional during active development by creating a command-line flag that enables the new behavior. Then set the new flag in the <a href="../featureflags/index.html"><code>FeatureFlags</code></a>’ <a href="../featureflags/current/index.html"><code>current</code></a> instance, making it available for the rest of the compilation process.</p><h3>The FeatureFlags structure</h3><p>Feature flags are defined in the <a href="../featureflags/index.html"><code>FeatureFlags</code></a> structure. This type has a static <a href="../featureflags/current/index.html"><code>current</code></a> property that contains a global instance of the flags that can be accessed throughout the compiler. When adding a flag property to this struct, give it a reasonable default value so that the default initializer can be used.</p><h3>Feature flags on the command line</h3><p>Command-line feature flags live in the <code>Docc.Convert.FeatureFlagOptions</code> in <code>SwiftDocCUtilities</code>. This type implements the <code>ParsableArguments</code> protocol from Swift Argument Parser to create an option group for the <code>convert</code> and <code>preview</code> commands.</p><p>These options are then handled in <code>ConvertAction.init(fromConvertCommand:)</code>, still in <code>SwiftDocCUtilities</code>, where they are written into the global feature flags <a href="../featureflags/current/index.html"><code>current</code></a> instance, which can then be used during the compilation process.</p><h3>Feature flags in Info.plist</h3><p>A subset of feature flags can affect how a documentation bundle is authored. For example, the experimental overloaded symbol presentation can affect how a bundle curates its symbols due to the creation of overload group pages. These flags should also be added to the <code>BundleFeatureFlags</code> type, so that they can be parsed out of a bundle’s Info.plist.</p><p>Feature flags that are loaded from an Info.plist file are saved into the global feature flags while the bundle is being registered. To ensure that your new feature flag is properly loaded, update the <code>loadFlagsFromBundle(_:)</code> method to load your new field into the global flags.</p></article></noscript><div id="app"></div></body></html>